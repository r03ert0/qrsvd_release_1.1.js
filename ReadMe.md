# Implicit QR SVD, Emscripten-transpiled to JavaScript

This is a javascript version of the Implicit QR SVD code by Theodore Gast,
Chuyuan Fu, Chenfanfu Jiang, Joseph Teran

If the code is used in an article, the following paper shall be cited:

```
@techreport{qrsvd:2016,
  title={Implicit-shifted Symmetric QR Singular Value Decomposition of 3x3 Matrices},
  author={Gast, Theodore and Fu, Chuyuan and Jiang, Chenfanfu and Teran, Joseph},
  year={2016},
  institution={University of California Los Angeles}
}
```

See the original code for licensing information:
[https://www.seas.upenn.edu/~cffjiang/research/svd/qrsvd_release_1.1.zip](https://www.seas.upenn.edu/~cffjiang/research/svd/qrsvd_release_1.1.zip)

### About this version
This version of the code was generated using Emscripten and the version 3.3.7 of Eigen.
The C++ code has been slightly changed:

* The headers `mmintrin.h` and `xmmintrin.h` were commented out in the file `Tools.h`
* The `approx_rsqrt` function in `Tools.h` was replaced by a copy of the `rsqrt`
function in the same file.

The `.js` code is generated using the `build.sh` script. The other 2 `build-*.sh`
scripts are conserved for archival purposes.

The `svdqr.js` file creates more convenient wrappers to the functions generated by
emscripten. The script `svd-test.js` shows how to use the functions. Basically,

```
const {svd2qr, polar2qr, svd3qr, polar3qr} = require('./svdqr.js');

const m2x2 = [1,2,3,4];
const m3x3 = [1,2,3,4,5,6,7,8,10];
const nano2x2 = [1, 1e-7, 1e-7, 2];

console.log(svd2qr(m2x2));
console.log(polar2qr(m2x2));
console.log(svd3qr(m3x3));
console.log(polar3qr(m3x3));
console.log(svd2qr(nano2x2));
```

